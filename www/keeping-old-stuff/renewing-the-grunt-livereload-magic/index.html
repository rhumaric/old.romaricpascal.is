<!doctype html><html lang="en-US"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .u-troisCoups body>* {
            visibility: hidden;
        }
    </style>
    <script>
        (function (window) {
            if (document.documentElement.classList) {
                window.troisCoups = {
                    reveal: function () {
                        document.documentElement.classList.remove('u-troisCoups');
                    }
                };


                document.documentElement.classList.add('u-troisCoups');
                setTimeout(window.troisCoups.reveal, 1500);
            }
        })(window);
    </script>

    <link rel="stylesheet" href="/wp-content/themes/romaricpascal.is/style.css">
    <link rel="alternate" type="application/rss+xml" title="Romaric Pascal | Lettering &#x26; web development" href="/feed">

    <title>   Renewing the grunt &#x26; livereload magic | Romaric Pascal</title>
    <meta name="description" content="Lettering &#x26; web development">

    <link rel="apple-touch-icon" sizes="180x180" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/favicon-16x16.png">
<link rel="manifest" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/manifest.json">
<link rel="mask-icon" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/safari-pinned-tab.svg" color="#022950">
<link rel="shortcut icon" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/favicon.ico">
<meta name="msapplication-config" content="/wp-content/themes/romaricpascal.is/assets/images/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffc744">
    <!-- FB OpenGraph info -->
        <meta prefix="og:http://ogp.me/ns#" property="og:url" content="/writing-about/renewing-the-grunt-livereload-magic/">
        <meta prefix="og:http://ogp.me/ns#" property="og:title" content="   Renewing the grunt &#x26; livereload magic | Romaric Pascal">
    <meta prefix="og:http://ogp.me/ns#" property="og:description" content="Lettering &#x26; web development">
    <meta prefix="og:http://ogp.me/ns#" property="og:image" content="/wp-content/themes/romaricpascal.is/assets/images/rp_with-padding_yellowbg_480.png">

    <!-- Twitter cards -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@romaricpascal">
    <meta name="twitter:title" content="   Renewing the grunt &#x26; livereload magic | Romaric Pascal">
    <meta name="twitter:description" content="Lettering &#x26; web development">
    <meta name="twitter:image" content="/wp-content/themes/romaricpascal.is/assets/images/rp_with-padding_yellowbg_480.png">

    <link rel="dns-prefetch" href="//s.w.org">

		
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>



<link rel="canonical" href="/writing-about/renewing-the-grunt-livereload-magic/">
  </head>
  <body class="post-template-default single single-post postid-317 single-format-standard flexbug3Wrapper">
    <header id="#header" class="rp-Header">
        <a class="rp-Logo" href="/" title="Home">
    <img src="/wp-content/themes/romaricpascal.is/assets/images/rp-letters_144.png" alt="R-P monogram">
</a>
<nav class="rp-BreadcrumbNav">
    <div class="rp-CollapsedItemsMenu">
        <a class="rp-BreadcrumbLink rp-CollapsedItemsMenuToggle js-toggle" data-toggle-group="overlays" data-toggle-target=".rp-CollapsedItems">
            <span class="rp-BreadcrumbLinkSeparator"></span>
            <span class="rp-BreadcrumbLink__title">...</span>
        </a>
        <div class="rp-CollapsedItems js-outsideToggle"></div>
    </div>
    <div class="rp-BreadcrumbNavItems js-collapsible">
				<a href="/writing-about/" class="rp-BreadcrumbLink">
			<span class="rp-BreadcrumbLinkSeparator"></span>
			<span class="rp-BreadcrumbLink__title">Posts</span>
		</a>
		    </div>
</nav>      <nav class="rp-MainNav">
        <a class="t-hidden-visually" tabindex="1" href="#content">Skip to content</a>
        <a href="#main-nav" class="js-toggle" data-toggle-group="overlays" data-toggle-target=".rp-MenuContainer">Menu</a>
        <div class="rp-MenuContainer js-outsideToggle" id="main-nav">
        <a class="rp-NavLogo" href="/" title="Home">
            <img src="/wp-content/themes/romaricpascal.is/assets/images/rp-knockout_shade_144.png" alt="Home">
        </a>
        <div class="menu-site-navigation-container"><ul id="menu-site-navigation" class="rp-Menu rp-Header__menuI"><li id="menu-item-936" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-936"><a href="/">Home</a></li>
<li id="menu-item-960" class="menu-item menu-item-type-post_type_archive menu-item-object-project menu-item-has-children menu-item-960"><a href="/proud-of/">Portfolio</a>
<ul class="sub-menu">
	<li id="menu-item-942" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-942"><a href="/proud-of/logo-brand-designs">Logo &#x26; Brand</a></li>
	<li id="menu-item-954" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-954"><a href="/proud-of/tshirts-merch-designs/">T-shirts &#x26; merch</a></li>
	<li id="menu-item-957" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-957"><a href="/proud-of/print-illustration-designs">Print &#x26; illustration</a></li>
</ul>
</li>
<li id="menu-item-964" class="menu-item menu-item-type-post_type_archive menu-item-object-artwork menu-item-964"><a href="/drawing-letters/">Artworks</a></li>
<li id="menu-item-935" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-935"><a href="/writing-about/">Blog</a></li>
<li id="menu-item-933" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-933"><a href="/happy-to-chat/">Contact</a></li>
<li id="menu-item-1022" class="menu-item menu-item-type-taxonomy menu-item-object-craft current-post-ancestor current-menu-parent current-post-parent menu-item-1022"><a href="/writing-about/craft/web/">Web</a></li>
<li id="menu-item-934" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-934"><a target="_blank" href="/selling-nice-stuff/">Shop</a></li>
</ul></div>        <a class="rp-MenuToggle js-toggle" href="#" data-toggle-group="overlays" data-toggle-target=".rp-MenuContainer">Close menu</a>
        <small class="rp-Legal l-Container">© Romaric Pascal (trading name of <a href="https://beta.companieshouse.gov.uk/company/08544032">Rhumaric Ltd</a>)</small>
        </div>
      </nav>
    </header>
    <div class="rp-Viewport l-vertCentered u-mh-100vh">


<article class="rp-Content">
  <header class="rp-HeaderWithSubhead u-mb-2">
    <h1 class="rp-HeaderWithSubhead__heading">
        Renewing the grunt &#x26; livereload magic    </h1>
    <p><time datetime="2013-07-24T23:48:30+00:00">24 Jul 2013</time> — An article about: <a href="/writing-about/craft/web/" rel="tag">Web</a> - <a href="/writing-about/category/uncategorized/" rel="category tag">Uncategorized</a></p>
  </header>
  <main>
    <p>A while ago, I wrote <a href="/keeping-old-stuff/reloading-magic-with-grunt-and-livereload/">an article explaining how to use grunt and livereload</a> to spare you refreshing your page every time you changed your HTML, CSS or javascipt. The <code>grunt-livereload</code> plugin it used has gone deprecated, but the “magic” achived by it can still be attained. Let’s see how to do it!</p>
<h2>It’s the same…</h2>
<p>As in the previous article, we’ll set up grunt to:</p>
<ul>
<li>launch a server to host your project’s file (helps inject the Javascript needed for livereload to work);</li>
<li>open the browser to your project (optional, but saves a little time);</li>
<li>and most importantly, reload the page when you update the <code>index.html</code> page.</li>
</ul>
<p>As in the previous article, we’ll keep things simple. The project will have just an <code>index.html</code> file (content of your choosing, just make sure it has a <code>&#x3C;body></code> tag). And as in the previous article, you’ll need to have <a href="https://gruntjs.com/">Grunt JS</a> on your machine. This means you’ll need to install <a href="https://nodejs.org/">NodeJS and NPM</a> too.</p>
<h2>… but different</h2>
<p>What differs from the first article is the list of packages we’ll be using. Out goes <code>grunt-livereload</code>, and in comes <code>grunt-watch</code> (which will replace <code>grunt-regarde</code> as well). Without <code>grunt-livereload</code>, we also need something to inject the Javascript that reloads the page. This is why we’ll replace <code>grunt-contrib-connect</code> by <code>grunt-express</code> which has an option just for this. To recap, we’ll use:</p>
<ul>
<li>
<a href="https://github.com/blai/grunt-express" title="Grunt Express task"><code>grunt-express</code></a>, to serve the files and inject the livereload javascript;</li>
<li>
<a href="https://github.com/onehealth/grunt-open" title="Grunt Open task"><code>grunt-open</code></a>, to open the browser;</li>
<li>
<a href="https://github.com/gruntjs/grunt-contrib-watch" title="Grunt Watch task"><code>grunt-contrib-watch</code></a>, to monitor the changes on the files and notify the livereload server.</li>
</ul>
<p>This leads to the following <code>package.json</code> file at the root of the project:</p>
<p><script src="https://gist.github.com/rhumaric/6075187.js"></script></p>
<p>We can now install the packages running <code>npm install</code> from a command line opened in the folder of the project. Once it’s done, we’re ready to dive in the Grunt configuration 🙂</p>
<h2>Serving and receiving</h2>
<p>Before we look into livereload, let’s get rid of the logistic parts: launching a server and opening the browser automatically. The Grunt configuration is close to the one in the previous article, as `grunt-express` and `grunt-contrib-connect` have similar options (at least for what we’re doing). This gives us the following <code>Gruntfile.js</code> file (to place at the root of your project):</p>
<p><script src="https://gist.github.com/rhumaric/6075207.js"></script></p>
<p>With this configuration, typing <code>grunt server</code> in your command line (from the folder of the project, of course) will start a server on port 9000 and open <a href="https://localhost:9000" rel="nofollow">https://localhost:9000</a> so you can access your project.</p>
<h2>The reloading magic</h2>
<p>Livereload works by relaying notifications that files changed to a bit of javascript on your page that will refresh accordingly (hmmm… might have just killed the magic there :P). This means:</p>
<ul>
<li>something needs to tell livereload when the file changes: that’s the role of the <code>grunt-contrib-watch</code> plugin (it’ll start livereload too)</li>
<li>you ‘ll need the livereload javascript in your page. That’s where <code>grunt-express</code> comes handy.</li>
</ul>
<p>Both tasks make it really easy to use livereload, providing a <code>livereload</code> option. Set it to <code>true</code> or to the port you want the livereload service to run (is it necessary to remind to use the same port for both options in this case ;)), and you’re good to go.</p>
<p>And here is our final Gruntfile! Note the new watch configuration, the <code>livereload</code> option that appeared in the <code>express</code> config and the <code>watch</code> task replacing <code>express-keepalive</code>:</p>
<p><script src="https://gist.github.com/rhumaric/6075230.js"></script></p>
<p>With the <code>grunt server</code> task up, if you modify (and save) your <code>index.html</code> file, your browser now reloads the page automatically. Magic! You can, of course, monitor more than one file with <code>watch</code>, but I’ll let the <a href="https://github.com/gruntjs/grunt-contrib-watch#files">tasks documentation</a> explain it.</p>
<p><em>Note: If you run the task on Ubuntu (maybe on other linux distributions too) and encounter a <code>watch ENOSPC</code> error when running the task, you might want to look at this <a href="https://github.com/yeoman/yeoman/issues/717#issuecomment-11347183">Github comment</a>.</em></p>
<p><em>Note: It seems <code>grunt-express</code> offers a <a href="https://github.com/blai/grunt-express#watch-experimental" title="grunt-express watch option"><code>watch</code> option</a> to monitor file changes and trigger livereload. This would make the Gruntfile a bit lighter. I prefer having a separate <code>grunt-contrib-watch</code> task, though. I often need it to monitor files for other purposes (YUIDoc, LESS…). It keeps concerns separated too: <code>grunt-express</code> serves the files, <code>grunt-contrib-watch</code> monitors them. This makes it easier to find back where to tweak things, I feel. But it’s just personal preference in the end 🙂</em></p>
<h2>Wrapping it up</h2>
<p><code>grunt-contrib-livereload</code> is deprecated, but livereload still integrates nicely with Grunt. Even better, the other plugins play well with it, which leads to a much leaner configuration. All is left for me is to thank <a href="http://chandlervdw.com/">Chandler Van De Water</a> for letting me now the old plugin was deprecated, and let you enjoy the livereload magic. </p>
  </main>
  <aside>

  </aside>
  <nav class="rp-PrevNextNav">
		<a class="rp-PrevNextLink rp-PrevNextLink-prev rp-PrevNextNav__previous" href="/writing-about/discovering-web-workers/" rel="prev" accesskey="j" data-key="left" title="Discovering Web Workers">
	   	title	</a>
		<a class="rp-PrevNextLink rp-PrevNextLink-next rp-PrevNextNav__next" href="/writing-about/smoothening-your-workflow-with-git-hooks/" rel="next" accesskey="k" data-key="right" title="Smoothening your workflow with Git hooks">
	   	title	</a>
</nav>
</article>

  </div>
  

  <script defer src="/wp-content/themes/romaricpascal.is/main.js"></script>

</body></html>