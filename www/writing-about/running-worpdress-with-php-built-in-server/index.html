<!doctype html><html lang="en-US"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .u-troisCoups body>* {
            visibility: hidden;
        }
    </style>
    <script>
        (function (window) {
            if (document.documentElement.classList) {
                window.troisCoups = {
                    reveal: function () {
                        document.documentElement.classList.remove('u-troisCoups');
                    }
                };


                document.documentElement.classList.add('u-troisCoups');
                setTimeout(window.troisCoups.reveal, 1500);
            }
        })(window);
    </script>

    <link rel="stylesheet" href="/wp-content/themes/romaricpascal.is/style.css">
    <link rel="alternate" type="application/rss+xml" title="Romaric Pascal | Lettering &#x26; web development" href="/feed">

    <title>   Running Worpdress with PHP built in server | Romaric Pascal</title>
    <meta name="description" content="Lettering &#x26; web development">

    <link rel="apple-touch-icon" sizes="180x180" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/favicon-16x16.png">
<link rel="manifest" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/manifest.json">
<link rel="mask-icon" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/safari-pinned-tab.svg" color="#022950">
<link rel="shortcut icon" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/favicon.ico">
<meta name="msapplication-config" content="/wp-content/themes/romaricpascal.is/assets/images/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffc744">
    <!-- FB OpenGraph info -->
        <meta prefix="og:http://ogp.me/ns#" property="og:url" content="/writing-about/running-worpdress-with-php-built-in-server/">
        <meta prefix="og:http://ogp.me/ns#" property="og:title" content="   Running Worpdress with PHP built in server | Romaric Pascal">
    <meta prefix="og:http://ogp.me/ns#" property="og:description" content="Lettering &#x26; web development">
    <meta prefix="og:http://ogp.me/ns#" property="og:image" content="/wp-content/themes/romaricpascal.is/assets/images/rp_with-padding_yellowbg_480.png">

    <!-- Twitter cards -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@romaricpascal">
    <meta name="twitter:title" content="   Running Worpdress with PHP built in server | Romaric Pascal">
    <meta name="twitter:description" content="Lettering &#x26; web development">
    <meta name="twitter:image" content="/wp-content/themes/romaricpascal.is/assets/images/rp_with-padding_yellowbg_480.png">

    <link rel="dns-prefetch" href="//s.w.org">
		
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>



<link rel="canonical" href="/writing-about/running-worpdress-with-php-built-in-server/">
  </head>
  <body class="post-template-default single single-post postid-260 single-format-standard flexbug3Wrapper">
    <header id="#header" class="rp-Header">
        <a class="rp-Logo" href="/" title="Home">
    <img src="/wp-content/themes/romaricpascal.is/assets/images/rp-letters_144.png" alt="R-P monogram">
</a>
<nav class="rp-BreadcrumbNav">
    <div class="rp-CollapsedItemsMenu">
        <a class="rp-BreadcrumbLink rp-CollapsedItemsMenuToggle js-toggle" data-toggle-group="overlays" data-toggle-target=".rp-CollapsedItems">
            <span class="rp-BreadcrumbLinkSeparator"></span>
            <span class="rp-BreadcrumbLink__title">...</span>
        </a>
        <div class="rp-CollapsedItems js-outsideToggle"></div>
    </div>
    <div class="rp-BreadcrumbNavItems js-collapsible">
				<a href="/writing-about/" class="rp-BreadcrumbLink">
			<span class="rp-BreadcrumbLinkSeparator"></span>
			<span class="rp-BreadcrumbLink__title">Posts</span>
		</a>
		    </div>
</nav>      <nav class="rp-MainNav">
        <a class="t-hidden-visually" tabindex="1" href="#content">Skip to content</a>
        <a href="#main-nav" class="js-toggle" data-toggle-group="overlays" data-toggle-target=".rp-MenuContainer">Menu</a>
        <div class="rp-MenuContainer js-outsideToggle" id="main-nav">
        <a class="rp-NavLogo" href="/" title="Home">
            <img src="/wp-content/themes/romaricpascal.is/assets/images/rp-knockout_shade_144.png" alt="Home">
        </a>
        <div class="menu-site-navigation-container"><ul id="menu-site-navigation" class="rp-Menu rp-Header__menuI"><li id="menu-item-936" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-936"><a href="/">Home</a></li>
<li id="menu-item-960" class="menu-item menu-item-type-post_type_archive menu-item-object-project menu-item-has-children menu-item-960"><a href="/proud-of/">Portfolio</a>
<ul class="sub-menu">
	<li id="menu-item-942" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-942"><a href="/proud-of/logo-brand-designs">Logo &#x26; Brand</a></li>
	<li id="menu-item-954" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-954"><a href="/proud-of/tshirts-merch-designs/">T-shirts &#x26; merch</a></li>
	<li id="menu-item-957" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-957"><a href="/proud-of/print-illustration-designs">Print &#x26; illustration</a></li>
</ul>
</li>
<li id="menu-item-964" class="menu-item menu-item-type-post_type_archive menu-item-object-artwork menu-item-964"><a href="/drawing-letters/">Artworks</a></li>
<li id="menu-item-935" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-935"><a href="/writing-about/">Blog</a></li>
<li id="menu-item-933" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-933"><a href="/happy-to-chat/">Contact</a></li>
<li id="menu-item-1022" class="menu-item menu-item-type-taxonomy menu-item-object-craft current-post-ancestor current-menu-parent current-post-parent menu-item-1022"><a href="/writing-about/craft/web/">Web</a></li>
<li id="menu-item-934" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-934"><a target="_blank" href="/selling-nice-stuff/">Shop</a></li>
</ul></div>        <a class="rp-MenuToggle js-toggle" href="#" data-toggle-group="overlays" data-toggle-target=".rp-MenuContainer">Close menu</a>
        <small class="rp-Legal l-Container">© Romaric Pascal (trading name of <a href="https://beta.companieshouse.gov.uk/company/08544032">Rhumaric Ltd</a>)</small>
        </div>
      </nav>
    </header>
    <div class="rp-Viewport l-vertCentered u-mh-100vh">


<article class="rp-Content">
  <header class="rp-HeaderWithSubhead u-mb-2">
    <h1 class="rp-HeaderWithSubhead__heading">
        Running Worpdress with PHP built in server    </h1>
    <p><time datetime="2017-01-25T11:36:41+00:00">25 Jan 2017</time> — An article about: <a href="/writing-about/craft/web/" rel="tag">Web</a> - <a href="/writing-about/category/php/built-in-server/" rel="category tag">Built in server</a> - <a href="/writing-about/category/php/" rel="category tag">PHP</a> - <a href="/writing-about/category/php/wordpress/" rel="category tag">Wordpress</a></p>
  </header>
  <main>
    <h1 id="running-worpdress-with-php-built-in-server"><a class="headeranchor-link" href="#running-worpdress-with-php-built-in-server" name="user-content-running-worpdress-with-php-built-in-server"></a>Running Worpdress with PHP built in server</h1>
<p>Having to set up Apache to serve each WordPress project on my machine is a bit of a pain.<br>
Fortunately, PHP comes with a built-in server since its version 5.4. And that server is enough to get WordPress running.<br>
You’ll still need a MySQL database, but that’ll reduce the logistics a bit.</p>
<h2 id="launching-the-build-in-server"><a class="headeranchor-link" href="#launching-the-build-in-server" name="user-content-launching-the-build-in-server"></a>Launching the build-in server</h2>
<p>You start the built-in server with <code>php -S</code>. The command just needs the host and port to which you want to attach the server. For example:</p>
<div class="codehilite">
<pre>php -S localhost:8000
</pre>
</div>
<p>Navigate with the command line into the folder containing the <code>index.php</code> of your WordPress project. Run the above command. And there you go, you have a server hosting your WordPress project at <a href="http://localhost:8000" rel="nofollow">http://localhost:8000</a>.</p>
<h2 id="rewriting-urls"><a class="headeranchor-link" href="#rewriting-urls" name="user-content-rewriting-urls"></a>Rewriting URLs</h2>
<p>It’ll work fine for <code>index.php?p=N</code> kind of URLs. But chances are you prefer pretty permalinks. On Apache, it relies on URL rewriting to route the requests to <code>index.php</code>. The <code>php -S</code> command can do just the same, except instead of relying on some configuration file, it’ll rely on PHP code. It accepts a file as a 3rd argument which will be the file handling the requests.</p>
<p>“Easy, let’s use <code>index.php</code> as that 3rd argument and we’re done!”. It’s not quite that simple. WordPress admin links to different PHP files, for example. So WordPress’ <code>index.php</code> can’t be the one handling all requests. We’ll need a new file to handle the URL rewriting. If the PHP file exist, run that. Otherwise, run the <code>index.php</code>. Let’s call it <code>routing.php</code> and put it right next to the <code>index.php</code> file.</p>
<div class="codehilite">
<pre><span class="x">// Extracted from the `wp-cli` project. https://wp-cli.org/</span>

<span class="x">$root = $_SERVER['DOCUMENT_ROOT'];</span>
<span class="x">$path = '/'. ltrim( parse_url( urldecode( $_SERVER['REQUEST_URI'] ) )['path'], '/' );</span>

<span class="x">if ( file_exists( $root.$path ) ) {</span>

<span class="x">    // Enforces trailing slash, keeping links tidy in the admin</span>
<span class="x">    if ( is_dir( $root.$path ) &#x26;&#x26; substr( $path, -1 ) !== '/' ) {</span>
<span class="x">        header( "Location: $path/" );</span>
<span class="x">        exit;</span>
<span class="x">    }</span>

<span class="x">    // Runs PHP file if it exists</span>
<span class="x">    if ( strpos( $path, '.php' ) !== false ) {</span>
<span class="x">        chdir( dirname( $root.$path ) );</span>
<span class="x">        require_once $root.$path;</span>
<span class="x">    } else {</span>
<span class="x">        return false;</span>
<span class="x">    }</span>
<span class="x">} else {</span>

<span class="x">    // Otherwise, run `index.php`</span>
<span class="x">    chdir( $root );</span>
<span class="x">    require_once 'index.php';</span>
<span class="x">}</span>
</pre>
</div>
<p>With this file, we get the equivalent of Apache’s <code>RewriteRules</code> . Nice permalinks will be routed to <code>index.php</code> when running:</p>
<div class="codehilite">
<pre>php -S localhost:8000 routing.php
</pre>
</div>
<p>There’s still one last step to get the permalinks handled properly by WordPress. Letting it know that URLs are rewriten, otherwise it’ll insist on using <code>index.php</code> in the URL.</p>
<h2 id="telling-wordpress-urls-are-rewriten"><a class="headeranchor-link" href="#telling-wordpress-urls-are-rewriten" name="user-content-telling-wordpress-urls-are-rewriten"></a>Telling WordPress URLs are rewriten</h2>
<p>To decide wether to put an <code>index.php</code> inside its URLs, WordPress tries to detect if the server uses URL rewrites. Unfortunately, it cannot see our <code>routing.php</code> file handles that, so it acts like if there’s no rewriting for now. The <a href="https://developer.wordpress.org/reference/hooks/got_url_rewrite/"><code>got_url_rewrite</code></a> function defines a filter that can be used to alter its returned value and force it to true. You can put it in the <code>functions.php</code> file of your theme, a plugin you activate when developing, or a <a href="https://codex.wordpress.org/Must_Use_Plugins">must use plugin</a>.</p>
<div class="codehilite">
<pre><span class="x">function enforce_got_url_rewrite() {</span>
<span class="x">  return true;</span>
<span class="x">}</span>

<span class="x">add_filter('got_url_rewrite', 'enforce_got_url_rewrite');</span>
</pre>
</div>
<p>No more need to setup a VHost on Apache for each project. Download your project, setup the DB, setup the wp-config file and <code>php -S</code> your way!</p>
  </main>
  <aside>

  </aside>
  <nav class="rp-PrevNextNav">
		<a class="rp-PrevNextLink rp-PrevNextLink-prev rp-PrevNextNav__previous" href="/writing-about/quick-tip-console-logs-with-conditional-breakpoints/" rel="prev" accesskey="j" data-key="left" title="Quick tip: console logs with conditional breakpoints">
	   	title	</a>
		<a class="rp-PrevNextLink rp-PrevNextLink-next rp-PrevNextNav__next" href="/writing-about/case-study-a-logo-for-taskfight/" rel="next" accesskey="k" data-key="right" title="Case study: A logo for TaskFight">
	   	title	</a>
</nav>
</article>

  </div>
  

  <script defer src="/wp-content/themes/romaricpascal.is/main.js"></script>

</body></html>