<!--?xml version="1.0" encoding="UTF-8"?--><html><head></head><body><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:wfw="http://wellformedweb.org/CommentAPI/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" xmlns:slash="http://purl.org/rss/1.0/modules/slash/">

<channel>
	<title>Hiding elements and CSS animations â€“ Romaric Pascal</title>
	<atom:link href="/writing-about/hiding-elements-and-css-animations/feed/" rel="self" type="application/rss+xml">
	<link>
	<description>Lettering &#x26; web development</description>
	<lastbuilddate>Thu, 13 Feb 2020 11:35:45 +0000</lastbuilddate>
	<language>en-US</language>
	<sy:updateperiod>hourly</sy:updateperiod>
	<sy:updatefrequency>1</sy:updatefrequency>
	<generator>https://wordpress.org/?v=4.8.13</generator>
	<item>
		<title>Hiding elements and CSS animations</title>
		<link>/writing-about/hiding-elements-and-css-animations/
		<pubdate>Wed, 18 Dec 2013 16:58:08 +0000</pubdate>
		<dc:creator><!--[CDATA[romaricpascal]]--></dc:creator>
				<category><!--[CDATA[Uncategorized]]--></category>
		<description><!--[CDATA[<p-->Following the last article about <a href="/keeping-old-stuff/css-animations-and-javascript/">CSS animations using Javascript</a>, let's see how we can apply this to something closer to a real life situation than a bouncing ball. Animating the disapearance of an element in a list, for example. Something to make the situation below a bit smoother:<p></p>
<p><iframe width="100%" height="400" src="//jsfiddle.net/rhumaric/4pnxzsp1/1/embedded/result,js,html,css/" allowfullscreen frameborder="0"></iframe></p>
<p>At the moment, the element removal is pretty abrupt: click the button, boom it's just gone. Simply removing an element from the DOM does not bring the smoothest visual experience. Let's bring in some CSS animations to make things a bit more pleasant.</p>
<p><em>Note: The code in this article focuses on what happens when CSS animations are available. For a production website, youâ€™d need to detect if they are available (using Modernizr, for example), and choose what to do if they arenâ€™t to make sure the element still gets removed.</em></p>
<h2 id="making-the-element-disapear">Making elements disapear in CSS</h2>
<p>If you think of hiding elements with CSS, <code>display: none;</code> is probably that first comes to your mind. Unfortunately, the values taken by the display property are not of a <a href="https://www.w3.org/TR/css3-transitions/#animation-of-property-types-">type that can be animated</a>.</p>
<p>The next option in mind would be <code>visibility: hidden;</code>, but it has the same "I-am-not-animatable" issue.</p>
<p>Looking at the properties that <strong>are</strong> animatable, there are a few interesting options to make an element smoothly disapear, with these two probably being the most interesting:</p>
<ul>
<li><code>opacity</code>: to fade the element out</li>
<li><code>transform</code>: to scale the element or translate it out of screen</li>
</ul>
<h2 id="move-out!">Get it out of the way</h2>
<p>Let's go with the <code>transform</code> property to make the removed element disapear to the right of the screen. The animation does not depend on dynamic values, so its keyframes can sit quitely in a stylesheet. It'll get triggered by adding the <code>removed</code> class to the element that's disapearing. The <code>removed</code> class also bears the <code>animation-fill-mode: forwards;</code> property to make sure the element keeps the styles at the end of the animation. Without it, the element would instantly got back to where it was at the start of the animationâ€¦ not really what we want.</p>
<p><iframe width="100%" height="400" src="//jsfiddle.net/rhumaric/4pnxzsp1/2/embedded/result,css,js,html/" allowfullscreen frameborder="0"></iframe></p>
<p>The translation works well. Click, and off the screen is the removed element! Unfortunately, it leaves a massive blank space where the element was. <code>transform</code> We still need to remove the element once it's out of the screen. CSS animations trigger a <code>animationend</code> event once they complete, so we'll use it to detect when to remove the element.</p>
<p><iframe width="100%" height="400" src="//jsfiddle.net/rhumaric/4pnxzsp1/3/embedded/result,css,js,html/" allowfullscreen frameborder="0"></iframe></p>
<p>The element now slides out of the screen before it gets removed. Better! But the list still collapses quite abruptly once the element is removed. Letâ€™s improve that.</p>
<p><em>Note</em>: Removing the element makes the <code>animation-fill-mode</code> property redundant. No risk for the element to revert to its initial style, it's not there anymore. </p>
<h2 id="collapsing-smoothly">Collapsing smoothly</h2>
<p>This time, we'll animate the <code>height</code> property to reclaim the vertical space previously occupied by the object.</p>
<p>Sounds simple, but the fact that <code>height</code> does not animate if its value is <code>auto</code> makes things a bit tricky. For height to be animatable, it needs both its start value and end value to be a specific length.</p>
<p>This means we'll need to measure the item and set its <code>height</code> before we trigger the animation. And as we want the element to collapse only at a certain point in the animation, we'll need to <a href="/keeping-old-stuff/css-animations-and-javascript/">generate the keyframes with Javascript</a> to maintain the height constant during the first part of the animation.</p>
<p><iframe width="100%" height="400" src="//jsfiddle.net/rhumaric/4pnxzsp1/4/embedded/result,css,js,html/" allowfullscreen frameborder="0"></iframe></p>
<p>The first keyframe sets the initial height of the element to the one measured. Without it, the blank space will just snap instantly rather than smoothly collapsing. At the other end of the keyframes, we need to make sure the element is kept outside of the screen, which means repeating the transform in the last keyframe. And here we are, the element nicely moves out of the screen.</p>
<p><em>Note: Measuring the height of the removed element might impact the performances of your application (if you do it on to many of elements at the same time, for example, but probably not the only example). If it happens, animating <code>max-height</code> is a way to avoid measuring your elements. It might introduce a different perceived speed in the animations if your elements height are really different one from another, though.</em></p>
<h2 id="wrapping-it-up!">Wrapping it up!</h2>
<p>Despite not being able to animate <code>display: none;</code> or <code>visiblity: hidden;</code>, CSS animations are a great help when you want to make the removal of an element nicer to the eye. Especially if you need complex animations that could not be handled by CSS transitions on their own. No reason to have blinky disapearances anymore ðŸ™‚</p>
]]></description>
		<guid ispermalink="false">http://rhumaric.com/?p=416</guid>
		</item>
	</atom:link></channel>
</rss>
</body></html>