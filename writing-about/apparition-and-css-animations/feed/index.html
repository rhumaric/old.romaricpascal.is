<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Apparition and CSS Animations &#8211; Romaric Pascal</title>
	<atom:link href="/writing-about/apparition-and-css-animations/feed/" rel="self" type="application/rss+xml" />
	<link></link>
	<description>Lettering &#38; web development</description>
	<lastBuildDate>Thu, 13 Feb 2020 11:35:45 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.8.13</generator>
	<item>
		<title>Apparition and CSS Animations</title>
		<link>/writing-about/apparition-and-css-animations/</link>
		<pubDate>Mon, 30 Dec 2013 12:30:59 +0000</pubDate>
		<dc:creator><![CDATA[romaricpascal]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>
		<description><![CDATA[<p>Last article played with <a href="/keeping-old-stuff/hiding-elements-and-css-animations/">CSS animations to transition smoothly when making an element disapear</a>. The follow up was pretty easy to find: let&#8217;s see how to animate the apparition of an element on the page!</p>
<p><em>Note: As for the previous article, the article focus on the code manipulating the CSS animation. Don&#8217;t forget to make sure the element appears correctly on the page in browsers that do not support CSS animations ðŸ™‚</em></p>
<h2 id="fixed-dimensions">Fixed dimensions</h2>
<p>When the dimensions of the inserted element are set in CSS, things are pretty simple. The starting point is clear (often a <code>width</code> or <code>height</code> of 0). Everything is static, which means keyframes can sit quietly in the a stylesheet. All that&#8217;s left is to trigger the animation by <a href="/keeping-old-stuff/updating-style-with-javascript/">using Javascript to style the element</a> with the right <code>animation</code>. Easy, peasy!</p>
<p><iframe width="100%" height="300" src="https://jsfiddle.net/rhumaric/25RGY/embedded/result,js,css,html" allowfullscreen="allowfullscreen" frameborder="0"></iframe></p>
<p>Even when the dimensions of the new element are set in Javascript, things stay pretty simple. The animation just has to be <a href="/keeping-old-stuff/css-animations-and-javascript/">generated with Javascript</a> rather than sitting in a stylesheet. What makes things tricky is when the dimensions of the new element depend on its content. It happens quite often (if not most of the time), but things aren&#8217;t lost there ðŸ™‚</p>
<h2 id="fluid-dimensions">Fluid dimensions</h2>
<p>For elements sized according to their content, I think you&#8217;ll have guessed the issue: how to measure the element&#39;s final size (and/or position) while it&#39;s not yet displayed, as the CSS animation needs this information to animate properly (medreams of animation working with <code>auto</code> values :p)? </p>
<p>One strategy to overcome this problem is to create a hidden clone of the container the element is inserted in, with the same dimensions as the one already on the page. It needs:</p>
<ul>
<li>to be hidden using <code>visibility: hidden</code> rather than <code>display: none</code> so the layout gets computed</li>
<li>to be out of the flow, so it does not leave a massive blank space on the screen. <code>position: absolute</code> makes a fine candidate for this.</li>
</ul>
<p>With the clone in the DOM all that&#8217;s left is to insert the element in the clone, measure whatever is needed for the animation, <a href="/keeping-old-stuff/css-animations-and-javascript/">generate the appropriate keyframes</a> and trigger the animation.</p>
<p>Let&#39;s see how this looks with a list of items: </p>
<p><iframe width="100%" height="450" src="https://jsfiddle.net/rhumaric/eFu4L/embedded/result,js,css,html/" allowfullscreen="allowfullscreen" frameborder="0"></iframe></p>
<p>There are a few things to keep in mind when using this method:</p>
<ul>
<li><strong>how cloning is done</strong>: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node.cloneNode"<code>Node.cloneNode()</code></a> is the simplest way of cloning the container. However, the container might be the parent of a complex DOM structure you might not want to clone entirely everytime an element is added. Creating placeholders of the container&#8217;s children could make things simpler there. All that&#8217;s needed to measure the new element is the container and its child sizes, position and display properties.</li>
<li><strong>how the element is inserted in the clone</strong>: depending on how your container and its children are styled, you might not need to insert the element the same exact way it would be inserted in the document. A simple <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node.appendChild">Node.appendChild</a> can do the trick (like in the example).</a>
<li><strong>what to measure</strong>: obviously, you&#8217;ll want the dimensions (and maybe the position) of the inserted element. The insertion of and element will also shift its siblings around. Sometimes, the animation of the new element will also smoothly shift the siblings. But you might need to measure the new siblings positions and sizes and create them custom animations&#8230; if you want to animate them, of course!</li>
</ul>
<h2 id="wrapping-it-up">Wrapping it up</h2>
<p>When animating the apparition of a new element, knowing its final dimensions is the tricky part. It&#8217;s not so bad when its dimensions are set using CSS or Javascript. When the size depends on the content, a nice way to get them is to insert it in a hidden clone of its container. For the price of a temporary duplication of some of the DOM, you get an accurate measure how big the element will be once inserted on the page!</p>
]]></description>
		<guid isPermaLink="false">http://rhumaric.com/?p=433</guid>
		</item>
	</channel>
</rss>
