<!doctype html><html lang="en-US"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .u-troisCoups body>* {
            visibility: hidden;
        }
    </style>
    <script>
        (function (window) {
            if (document.documentElement.classList) {
                window.troisCoups = {
                    reveal: function () {
                        document.documentElement.classList.remove('u-troisCoups');
                    }
                };


                document.documentElement.classList.add('u-troisCoups');
                setTimeout(window.troisCoups.reveal, 1500);
            }
        })(window);
    </script>

    <link rel="stylesheet" href="/wp-content/themes/romaricpascal.is/style.css">
    <link rel="alternate" type="application/rss+xml" title="Romaric Pascal | Lettering &#x26; web development" href="/feed">

    <title>   Expressive scroll animations | Romaric Pascal</title>
    <meta name="description" content="Lettering &#x26; web development">

    <link rel="apple-touch-icon" sizes="180x180" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/favicon-16x16.png">
<link rel="manifest" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/manifest.json">
<link rel="mask-icon" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/safari-pinned-tab.svg" color="#022950">
<link rel="shortcut icon" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/favicon.ico">
<meta name="msapplication-config" content="/wp-content/themes/romaricpascal.is/assets/images/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffc744">
    <!-- FB OpenGraph info -->
        <meta prefix="og:http://ogp.me/ns#" property="og:url" content="/writing-about/expressive-scroll-animations/">
        <meta prefix="og:http://ogp.me/ns#" property="og:title" content="   Expressive scroll animations | Romaric Pascal">
    <meta prefix="og:http://ogp.me/ns#" property="og:description" content="Lettering &#x26; web development">
    <meta prefix="og:http://ogp.me/ns#" property="og:image" content="/wp-content/themes/romaricpascal.is/assets/images/rp_with-padding_yellowbg_480.png">

    <!-- Twitter cards -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@romaricpascal">
    <meta name="twitter:title" content="   Expressive scroll animations | Romaric Pascal">
    <meta name="twitter:description" content="Lettering &#x26; web development">
    <meta name="twitter:image" content="/wp-content/themes/romaricpascal.is/assets/images/rp_with-padding_yellowbg_480.png">

    <link rel="dns-prefetch" href="//s.w.org">
<link rel="alternate" type="application/rss+xml" title="Romaric Pascal » Expressive scroll animations Comments Feed" href="/writing-about/expressive-scroll-animations/feed/">
		
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>



<link rel="canonical" href="/writing-about/expressive-scroll-animations/">
  </head>
  <body class="post-template-default single single-post postid-1108 single-format-standard flexbug3Wrapper">
    <header id="#header" class="rp-Header">
        <a class="rp-Logo" href="" title="Home">
    <img src="/wp-content/themes/romaricpascal.is/assets/images/rp-letters_144.png" alt="R-P monogram">
</a>
<nav class="rp-BreadcrumbNav">
    <div class="rp-CollapsedItemsMenu">
        <a class="rp-BreadcrumbLink rp-CollapsedItemsMenuToggle js-toggle" data-toggle-group="overlays" data-toggle-target=".rp-CollapsedItems">
            <span class="rp-BreadcrumbLinkSeparator"></span>
            <span class="rp-BreadcrumbLink__title">...</span>
        </a>
        <div class="rp-CollapsedItems js-outsideToggle"></div>
    </div>
    <div class="rp-BreadcrumbNavItems js-collapsible">
				<a href="/writing-about/" class="rp-BreadcrumbLink">
			<span class="rp-BreadcrumbLinkSeparator"></span>
			<span class="rp-BreadcrumbLink__title">Posts</span>
		</a>
		    </div>
</nav>      <nav class="rp-MainNav">
        <a class="t-hidden-visually" tabindex="1" href="#content">Skip to content</a>
        <a href="#main-nav" class="js-toggle" data-toggle-group="overlays" data-toggle-target=".rp-MenuContainer">Menu</a>
        <div class="rp-MenuContainer js-outsideToggle" id="main-nav">
        <a class="rp-NavLogo" href="" title="Home">
            <img src="/wp-content/themes/romaricpascal.is/assets/images/rp-knockout_shade_144.png" alt="Home">
        </a>
        <div class="menu-site-navigation-container"><ul id="menu-site-navigation" class="rp-Menu rp-Header__menuI"><li id="menu-item-936" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-936"><a href="/">Home</a></li>
<li id="menu-item-960" class="menu-item menu-item-type-post_type_archive menu-item-object-project menu-item-has-children menu-item-960"><a href="/proud-of/">Portfolio</a>
<ul class="sub-menu">
	<li id="menu-item-942" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-942"><a href="/proud-of/logo-brand-designs">Logo &#x26; Brand</a></li>
	<li id="menu-item-954" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-954"><a href="/proud-of/tshirts-merch-designs/">T-shirts &#x26; merch</a></li>
	<li id="menu-item-957" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-957"><a href="/proud-of/print-illustration-designs">Print &#x26; illustration</a></li>
</ul>
</li>
<li id="menu-item-964" class="menu-item menu-item-type-post_type_archive menu-item-object-artwork menu-item-964"><a href="/drawing-letters/">Artworks</a></li>
<li id="menu-item-935" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-935"><a href="/writing-about/">Blog</a></li>
<li id="menu-item-933" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-933"><a href="/happy-to-chat/">Contact</a></li>
<li id="menu-item-1022" class="menu-item menu-item-type-taxonomy menu-item-object-craft current-post-ancestor current-menu-parent current-post-parent menu-item-1022"><a href="/writing-about/craft/web/">Web</a></li>
<li id="menu-item-934" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-934"><a target="_blank" href="/selling-nice-stuff/">Shop</a></li>
</ul></div>        <a class="rp-MenuToggle js-toggle" href="#" data-toggle-group="overlays" data-toggle-target=".rp-MenuContainer">Close menu</a>
        <small class="rp-Legal l-Container">© Romaric Pascal (trading name of <a href="https://beta.companieshouse.gov.uk/company/08544032">Rhumaric Ltd</a>)</small>
        </div>
      </nav>
    </header>
    <div class="rp-Viewport l-vertCentered u-mh-100vh">


<article class="rp-Content">
  <header class="rp-HeaderWithSubhead u-mb-2">
    <h1 class="rp-HeaderWithSubhead__heading">
        Expressive scroll animations    </h1>
    <p><time datetime="2017-10-27T19:36:58+00:00">27 Oct 2017</time> — An article about: <a href="/writing-about/craft/web/" rel="tag">Web</a> - <a href="/writing-about/category/js/animations/" rel="category tag">Animations</a> - <a href="/writing-about/category/js/" rel="category tag">JS</a></p>
  </header>
  <main>
    <p><a href="/writing-about/animations-with-javascript-functions/">The introduction of this venture in animations with JavaScript functions</a> created a source of progress to handle scroll animations.<br>
Its features were a bit basic though, limiting to “over N% of the viewport height once past D%”.</p>
<p>I mean, it works but leaves it all to the developer to figure out those percentages, which might vary from screen size to screen size as the responsive design puts the element in a different position… Not to mention the next change of design, introducing a new element higher up in the page and shifting the animated element down.</p>
<p>Let’s see if we can create something more expressive and resilient to design changes. When animating elements on scroll, percents of the viewport are not really the things we reason about first. It’s more natural to go for “start when the <em>distance</em> from the <em>top of</em> the element to the <em>bottom of the viewport</em> reaches S<em>%</em> of the ~screen~<em>viewport height</em> and until it reaches E<em>%</em>”. So let’s shoot for that.</p>
<p>The highlighted parts of the sentence are each one concept we’re going to translate into JavaScript for this to work. There are two kinds of things there:</p>
<ol>
<li>Values, like the <em>top of</em> the element, the <em>bottom of the viewport</em> or the <em>viewport height</em>. But those vary with time: the window can be resized, the user can scroll… So similarly to the sources of progress we have for the animations, we’ll need sources of values here. </li>
<li>Computation over those values, like getting the <em>distance</em> between two points, or getting a <em>percentage</em>. Like a simple <code>-</code> or <code>/</code> operator, except they’ll have to work with our sources of values we said we needed just above.</li>
</ol>
<h2 id="bottom-of-viewport-and-viewport-height"><a name="user-content-bottom-of-viewport-and-viewport-height" href="#bottom-of-viewport-and-viewport-height" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Bottom of viewport and viewport height</h2>
<p>Let’s start with the simplest values here, which are actually the same value if you think about it. From the top of the viewport (which we’ll use as a common origin for our coordinates), they are the same value. And we don’t even need any computation to get it, the DOM provides it straight away: <code>document.body.clientHeight</code>.</p>
<p>The main thing we need to handle is making sure we can observe the changes of this value when the screen is resized.</p>
<figure><script src="https://gist.github.com/rhumaric/7e9497cdd97b9c839581105525e10585.js?file=bottomOfViewport.js"></script></figure>
<h2 id="top-of-el"><a name="user-content-top-of-el" href="#top-of-el" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Top of el</h2>
<p>Now we’ve got our information about the viewport, let’s get those about the element. That’s the one that’ll actually trigger changes on scroll, as the position of the element relative to the top of the viewport will change then.<br>
Here again, the DOM is pretty handdy providing that, with <code>el.getClientBoundingRect().top</code>.</p>
<figure>
<script src="https://gist.github.com/rhumaric/7e9497cdd97b9c839581105525e10585.js?file=topOf.js"></script><p></p>
<div class="o-ratio o-ratio--4:3">
<iframe src="/wp-content/uploads/demo/animation-with-functions/expressive-scroll/sources/">&#x26;#x3C;br />
    &#x26;#x3C;a href="wp-content/uploads/demo/animation-with-functions/expressive-scroll/sources/">See the demo&#x26;#x3C;/a>&#x26;#x3C;br />
</iframe>
</div><figcaption class="u-ta-c" style="padding: 0.5em;">First step out of the way, we can measure some dimensions \o/</figcaption></figure>
<p>And with that, we’re ready to move on to computing the distance and percentage.</p>
<h2 id="tbd"><a name="user-content-tbd" href="#tbd" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>TBD</h2>
<p>As the values above change, so will the distance and percentage. This means they also need to be sources of values. Sources of value that will:</p>
<ol>
<li>combine the value from different sources</li>
<li>compute a new value from there</li>
</ol>
<p>Combine, first. When observed, it’ll need to observe the sources it combines and just provide their values in an array.</p>
<figure><script src="https://gist.github.com/rhumaric/7e9497cdd97b9c839581105525e10585.js?file=combine.js"></script></figure>
<p>From there we can create the final sources, consuming this array for computation, but only after all data is there:</p>
<figure>
<script src="https://gist.github.com/rhumaric/7e9497cdd97b9c839581105525e10585.js?file=distance.js"></script><p></p>
<div class="o-ratio o-ratio--4:3">
<iframe src="/wp-content/uploads/demo/animation-with-functions/expressive-scroll/combined/">&#x26;#x3C;br />
    &#x26;#x3C;a href="wp-content/uploads/demo/animation-with-functions/expressive-scroll/combined/">See the demo&#x26;#x3C;/a>&#x26;#x3C;br />
</iframe>
</div><figcaption class="u-ta-c" style="padding: 0.5em;">Combining all this, we can now fade the circle out on scroll \o/.</figcaption></figure>
<h2 id="tying-it-all-together"><a name="user-content-tying-it-all-together" href="#tying-it-all-together" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Tying it all together</h2>
<p>There we go! We have everything we need and can now write a more understandable: <code>percentOf(viewportHeight, distance(topOf(el), bottomOfViewport))</code> to use as our source of progress. As it is, it would animate as the element goes through the whole viewport. We just need one last wrapping source that will scale the percentage into a neat [0..1] range according to our wishes. Let’s call it <code>between(range, source)</code>.</p>
<figure>
<script src="https://gist.github.com/rhumaric/7e9497cdd97b9c839581105525e10585.js?file=between.js"></script><p></p>
<div class="o-ratio o-ratio--4:3">
<iframe src="/wp-content/uploads/demo/animation-with-functions/expressive-scroll/final/">&#x26;#x3C;br />
    &#x26;#x3C;a href="wp-content/uploads/demo/animation-with-functions/expressive-scroll/final/">See the demo&#x26;#x3C;/a>&#x26;#x3C;br />
</iframe>
</div><figcaption class="u-ta-c" style="padding: 0.5em;">Notice how the left circle only animates between the selected range.</figcaption></figure>
<p>And voila! Combining functions, we have a pretty expressive way to define scroll based animations.</p>
<p>As with the first article, this is just a base to start with, that I got from implementing scroll based animations on this website. There’d be plenty more to explore around those scroll sources like :<br>
 – <a href="https://github.com/rhumaric/tinymation/issues/8">providing some based on the <code>intersectionRatio</code></a> from <a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver"><code>IntersectionObservers</code></a>,<br>
 – <a href="https://github.com/rhumaric/tinymation/issues/9">handling conditions different landmarks on the element &#x26; viewport</a> (for example: start when the top of the element crosses the bottom of the viewport and end when its bottom crosses the top of the viewport…)<br>
 – <a href="https://github.com/rhumaric/tinymation/issues">…</a></p>
<p>And of course around the areas for making animations with functions. I’ve started to gather some code on the <a href="https://github.com/rhumaric/tinymation">tinymation project on Github</a>. If you have thoughts on the topic, maybe specific use case, I’d be really happy to head about them. Feel free to <a href="https://github.com/rhumaric/tinymation">look at the code</a> and <a href="https://github.com/rhumaric/tinymation/issues">add issues (or comment on the existing ones)</a>.</p>
<p>PS. If you enjoyed combining this concept of sources of values that vary over time, you might want to have a look around Observables and reactive libraries like <a href="https://github.com/Reactive-Extensions/RxJS">RxJS</a>, <a href="https://github.com/staltz/xstream">xstream</a>…</p>
  </main>
  <aside>

  </aside>
  <nav class="rp-PrevNextNav">
		<a class="rp-PrevNextLink rp-PrevNextLink-prev rp-PrevNextNav__previous" href="/writing-about/animations-with-javascript-functions/" rel="prev" accesskey="j" data-key="left" title="Animations with JavaScript functions">
	   	title	</a>
		<a class="rp-PrevNextLink rp-PrevNextLink-next rp-PrevNextNav__next" href="/writing-about/composing-animations-through-functions/" rel="next" accesskey="k" data-key="right" title="Composing animations through functions">
	   	title	</a>
</nav>
</article>

  </div>
  

  <script defer src="/wp-content/themes/romaricpascal.is/main.js"></script>

</body></html>