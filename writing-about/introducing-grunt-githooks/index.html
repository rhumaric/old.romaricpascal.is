<!doctype html><html lang="en-US"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .u-troisCoups body>* {
            visibility: hidden;
        }
    </style>
    <script>
        (function (window) {
            if (document.documentElement.classList) {
                window.troisCoups = {
                    reveal: function () {
                        document.documentElement.classList.remove('u-troisCoups');
                    }
                };


                document.documentElement.classList.add('u-troisCoups');
                setTimeout(window.troisCoups.reveal, 1500);
            }
        })(window);
    </script>

    <link rel="stylesheet" href="/wp-content/themes/romaricpascal.is/style.css">
    <link rel="alternate" type="application/rss+xml" title="Romaric Pascal | Lettering &#x26; web development" href="/feed">

    <title>   Introducing grunt-githooks | Romaric Pascal</title>
    <meta name="description" content="Lettering &#x26; web development">

    <link rel="apple-touch-icon" sizes="180x180" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/favicon-16x16.png">
<link rel="manifest" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/manifest.json">
<link rel="mask-icon" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/safari-pinned-tab.svg" color="#022950">
<link rel="shortcut icon" href="/wp-content/themes/romaricpascal.is/assets/images/favicons/favicon.ico">
<meta name="msapplication-config" content="/wp-content/themes/romaricpascal.is/assets/images/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffc744">
    <!-- FB OpenGraph info -->
        <meta prefix="og:http://ogp.me/ns#" property="og:url" content="/writing-about/introducing-grunt-githooks/">
        <meta prefix="og:http://ogp.me/ns#" property="og:title" content="   Introducing grunt-githooks | Romaric Pascal">
    <meta prefix="og:http://ogp.me/ns#" property="og:description" content="Lettering &#x26; web development">
    <meta prefix="og:http://ogp.me/ns#" property="og:image" content="/wp-content/themes/romaricpascal.is/assets/images/rp_with-padding_yellowbg_480.png">

    <!-- Twitter cards -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@romaricpascal">
    <meta name="twitter:title" content="   Introducing grunt-githooks | Romaric Pascal">
    <meta name="twitter:description" content="Lettering &#x26; web development">
    <meta name="twitter:image" content="/wp-content/themes/romaricpascal.is/assets/images/rp_with-padding_yellowbg_480.png">

    <link rel="dns-prefetch" href="//s.w.org">
<link rel="alternate" type="application/rss+xml" title="Romaric Pascal » Introducing grunt-githooks Comments Feed" href="/writing-about/introducing-grunt-githooks/feed/">
		
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="contact-form-7-css" href="/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.9" type="text/css" media="all">


<link rel="canonical" href="/writing-about/introducing-grunt-githooks/">
  </head>
  <body class="post-template-default single single-post postid-358 single-format-standard flexbug3Wrapper">
    <header id="#header" class="rp-Header">
        <a class="rp-Logo" href="" title="Home">
    <img src="/wp-content/themes/romaricpascal.is/assets/images/rp-letters_144.png" alt="R-P monogram">
</a>
<nav class="rp-BreadcrumbNav">
    <div class="rp-CollapsedItemsMenu">
        <a class="rp-BreadcrumbLink rp-CollapsedItemsMenuToggle js-toggle" data-toggle-group="overlays" data-toggle-target=".rp-CollapsedItems">
            <span class="rp-BreadcrumbLinkSeparator"></span>
            <span class="rp-BreadcrumbLink__title">...</span>
        </a>
        <div class="rp-CollapsedItems js-outsideToggle"></div>
    </div>
    <div class="rp-BreadcrumbNavItems js-collapsible">
				<a href="/writing-about/" class="rp-BreadcrumbLink">
			<span class="rp-BreadcrumbLinkSeparator"></span>
			<span class="rp-BreadcrumbLink__title">Posts</span>
		</a>
		    </div>
</nav>      <nav class="rp-MainNav">
        <a class="t-hidden-visually" tabindex="1" href="#content">Skip to content</a>
        <a href="#main-nav" class="js-toggle" data-toggle-group="overlays" data-toggle-target=".rp-MenuContainer">Menu</a>
        <div class="rp-MenuContainer js-outsideToggle" id="main-nav">
        <a class="rp-NavLogo" href="" title="Home">
            <img src="/wp-content/themes/romaricpascal.is/assets/images/rp-knockout_shade_144.png" alt="Home">
        </a>
        <div class="menu-site-navigation-container"><ul id="menu-site-navigation" class="rp-Menu rp-Header__menuI"><li id="menu-item-936" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-936"><a href="/">Home</a></li>
<li id="menu-item-960" class="menu-item menu-item-type-post_type_archive menu-item-object-project menu-item-has-children menu-item-960"><a href="/proud-of/">Portfolio</a>
<ul class="sub-menu">
	<li id="menu-item-942" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-942"><a href="/proud-of/logo-brand-designs">Logo &#x26; Brand</a></li>
	<li id="menu-item-954" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-954"><a href="/proud-of/tshirts-merch-designs/">T-shirts &#x26; merch</a></li>
	<li id="menu-item-957" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-957"><a href="/proud-of/print-illustration-designs">Print &#x26; illustration</a></li>
</ul>
</li>
<li id="menu-item-964" class="menu-item menu-item-type-post_type_archive menu-item-object-artwork menu-item-964"><a href="/drawing-letters/">Artworks</a></li>
<li id="menu-item-935" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-935"><a href="/writing-about/">Blog</a></li>
<li id="menu-item-933" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-933"><a href="/happy-to-chat/">Contact</a></li>
<li id="menu-item-1022" class="menu-item menu-item-type-taxonomy menu-item-object-craft current-post-ancestor current-menu-parent current-post-parent menu-item-1022"><a href="/writing-about/craft/web/">Web</a></li>
<li id="menu-item-934" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-934"><a target="_blank" href="/selling-nice-stuff/">Shop</a></li>
</ul></div>        <a class="rp-MenuToggle js-toggle" href="#" data-toggle-group="overlays" data-toggle-target=".rp-MenuContainer">Close menu</a>
        <small class="rp-Legal l-Container">© Romaric Pascal (trading name of <a href="https://beta.companieshouse.gov.uk/company/08544032">Rhumaric Ltd</a>)</small>
        </div>
      </nav>
    </header>
    <div class="rp-Viewport l-vertCentered u-mh-100vh">


<article class="rp-Content">
  <header class="rp-HeaderWithSubhead u-mb-2">
    <h1 class="rp-HeaderWithSubhead__heading">
        Introducing grunt-githooks    </h1>
    <p><time datetime="2013-11-14T10:08:38+00:00">14 Nov 2013</time> — An article about: <a href="/writing-about/craft/web/" rel="tag">Web</a> - <a href="/writing-about/category/uncategorized/" rel="category tag">Uncategorized</a></p>
  </header>
  <main>
    <p>Git hooks allow you to run scripts when certain Git commands are executed. Grunt allows you to run Javascript tasks. Sounded to me like these two things are clearly meant to work together, so say hi to <a href="https://github.com/rhumaric/grunt-githooks"><code>grunt-githooks</code></a>!</p>
<p><code>grunt-githooks</code> is a Grunt plugin that generates Git hooks which will run specified Grunt task(s). It is available via NPM (<code>npm install grunt-githooks --save-dev</code>) and provides a <code>githooks</code> task that will generate the hooks.</p>
<h2 id="defining-hooks">Defining hooks</h2>
<p>Hooks are defined using simple <code>"name-of-the-hook": "space separated list of grunt tasks to run"</code> pairs in the <code>githooks</code> task configuration. Say you want to run <code>jshint</code> and your project's unit tests before each commit, you'd have something like this:</p>
<div class="highlight">
<pre><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
  <span class="nx">githooks</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">all</span><span class="o">:</span> <span class="p">{</span>
      <span class="c1">// Will run the jshint and test:unit tasks at every commit</span>
      <span class="s1">'pre-commit'</span><span class="o">:</span> <span class="s1">'jshint test:unit'</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="c1">// Rest of the Grunt configuration</span>
<span class="p">});</span>
</pre>
</div>
<p>This means the Gruntfile now centralises hooks definitions. This makes it easier to share than developers each having their own sets of scripts in their <code>.git\hooks</code> folder.</p>
<h2 id="generated-scripts">Generated scripts</h2>
<p>With the above configuration, running <code>grunt githooks</code> will create the following <code>pre-commit</code> file in the <code>.git\hooks</code> folder of your project:</p>
<div class="highlight">
<pre><span class="err">#</span><span class="o">!</span><span class="err">/usr/bin/env node</span>

<span class="c1">// GRUNT-GITHOOKS START</span>
<span class="kd">var</span> <span class="nx">exec</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'child_process'</span><span class="p">).</span><span class="nx">exec</span><span class="p">;</span>

<span class="nx">exec</span><span class="p">(</span><span class="s1">'grunt jshint test:unit'</span><span class="p">,</span> <span class="p">{</span>
       <span class="nx">cwd</span><span class="o">:</span> <span class="s1">'/path/to/project'</span>
     <span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">stdout</span><span class="p">,</span> <span class="nx">stderr</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">stdout</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">exitCode</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">stderr</span><span class="p">);</span>
    <span class="nx">exitCode</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="nx">exitCode</span><span class="p">);</span>
<span class="p">});</span>
<span class="c1">// GRUNT-GITHOOKS END</span>
</pre>
</div>
<p>As you notice, this is a NodeJS script. NodeJS runs on both Windows, Mac and Linux, and if you're using Grunt, it'll be there already, so it made sense to go for it. If you fancy another language, the plugin provides options to <a href="https://github.com/rhumaric/grunt-githooks#customising-hook-output">configure the output</a> to anything else, using a system of templates. </p>
<p>The <code>// GRUNT-GITHOOKS ...</code> comments mark where <code>grunt-githooks</code> should insert its script if a hook already exists. If they're not present, the script will simply be appended to any existing code, so any existing hook you have won't be lost.</p>
<h2 id="wrapping-it-up!">Wrapping it up!</h2>
<p>This was just a quick description of the <code>grunt-githooks</code> plugin (the project's README contains more details about the different config options). Hopefully enough to let you create hooks running Grunt tasks 🙂</p>
<p><em>Note: If you need to go futher and customise the output of the hooks, this <a href="https://viget.com/extend/grunt-getting-started-with-git-hooks" title="Grunt: Getting Started with Git Hooks">article presenting the use of the template option</a> by <a href="https://viget.com/about/team/cmanning">Chris Manning</a> is definitely worth a read!</em></p>
<p>The project is open source, by the way. So feel free to raise issues, submit pull requests… It's hosted on <a href="https://github.com/rhumaric/grunt-githooks">Github</a>.</p>
  </main>
  <aside>

  </aside>
  <nav class="rp-PrevNextNav">
		<a class="rp-PrevNextLink rp-PrevNextLink-prev rp-PrevNextNav__previous" href="/writing-about/smoothening-your-workflow-with-git-hooks/" rel="prev" accesskey="j" data-key="left" title="Smoothening your workflow with Git hooks">
	   	title	</a>
		<a class="rp-PrevNextLink rp-PrevNextLink-next rp-PrevNextNav__next" href="/writing-about/controlling-time-when-testing-javascript/" rel="next" accesskey="k" data-key="right" title="Controlling time when testing Javascript">
	   	title	</a>
</nav>
</article>

  </div>
  

  <script defer src="/wp-content/themes/romaricpascal.is/main.js"></script>

</body></html>